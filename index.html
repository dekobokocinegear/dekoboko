<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1, viewport-fit=cover" />
<title>웹 슬레이트 (Scene / Cut / Take) – Adaptive Fullscreen Stretch</title>
<style>
  :root{
    --line:#fff; --board:#000; --label:#fff; --value:#fff;
    --btn-bg:transparent; --btn-border:var(--line); --btn-text:var(--label);
    --focus-ring:rgba(127,127,127,.45);
  }
  .theme-invert{
    --line:#000; --board:#fff; --label:#000; --value:#000;
    --btn-bg:transparent; --btn-border:var(--line); --btn-text:var(--label);
    --focus-ring:rgba(0,0,0,.35);
  }

  *{box-sizing:border-box;margin:0;padding:0}
  html,body{width:100%;min-height:100dvh;background:var(--board);color:var(--label);font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Apple SD Gothic Neo,Noto Sans KR,Helvetica,Arial,sans-serif;overflow-y:auto}

  .wrap{width:100%;height:100svh;display:flex;align-items:center;justify-content:center;padding:env(safe-area-inset-top,0) env(safe-area-inset-right,0) env(safe-area-inset-bottom,0) env(safe-area-inset-left,0)}
  .slate{background:var(--board);width:100%;height:100%;border-radius:0;box-shadow:none;border:none;display:flex;flex-direction:column;}

  .top{flex:0 0 auto;display:flex;align-items:center;justify-content:space-between;gap:12px;padding:16px 20px;border-bottom:3px solid var(--line);font-weight:800;}
  .brandToggle{color:var(--btn-text);text-decoration:none;padding:6px 10px;border:2px solid var(--btn-border);border-radius:10px;}
  .midHint{flex:1;text-align:center;font-weight:300;font-size:10px;opacity:.7;letter-spacing:.02em;white-space:nowrap;}
  .controls{display:flex;gap:8px;}
  .themeBtn,.smallBtn{appearance:none;border:2px solid var(--btn-border);background:var(--btn-bg);color:var(--btn-text);padding:6px 10px;border-radius:10px;font-weight:800;cursor:pointer;line-height:1;white-space:nowrap;font-size:clamp(12px,1.4vw,16px);} 
  .themeBtn:focus-visible,.smallBtn:focus-visible{outline:3px solid var(--focus-ring);outline-offset:2px;}

  /* 메타: 내부 칸 구분선 제거 */
  .meta{flex:0 0 clamp(90px,15vh,160px);display:grid;grid-template-columns:1fr 1fr 1fr;border-bottom:3px solid var(--line);} 
  .meta .row{display:flex;flex-direction:column;justify-content:center;padding:clamp(8px,1vh,12px) clamp(10px,2vw,16px);} 
  .meta label{font:800 clamp(10px,1.2vw,14px)/1 var(--label);letter-spacing:.08em;margin-bottom:4px}
  .meta input{flex:1;background:transparent;color:var(--label);border:none;font-size:clamp(14px,2vw,24px);font-weight:800;padding:0;min-width:0;}
  .meta input::placeholder{color:#9ca3af;opacity:.9;font-weight:800}
  input[type="date"]{-webkit-appearance:none;appearance:none;}

  .grid{flex:1;display:grid;grid-template-columns:repeat(3,1fr);} 
  .cell{padding:clamp(10px,2.2vh,24px);border-right:3px solid var(--line);border-bottom:3px solid var(--line);display:flex;flex-direction:column;align-items:center;justify-content:center;gap:clamp(8px,1.4vh,16px);} 
  .cell:last-child{border-right:none;}

  .label{font-size:clamp(18px,3vw,32px);font-weight:900;color:var(--label);letter-spacing:.12em;}
  .valueBox{display:flex;align-items:center;justify-content:center;gap:12px;width:100%;flex-direction:row;} 
  .value{border:none;padding:clamp(8px,2vh,28px);width:100%;text-align:center;font-weight:900;font-size:clamp(56px,12vw,140px);line-height:1;color:var(--value);user-select:none;cursor:pointer;outline:none;}

  .inlineInput{width:60%;text-align:center;font-weight:900;font-size:clamp(40px,10vw,120px);padding:clamp(6px,1.8vh,18px);background:transparent;color:var(--value);border:2px solid var(--line);} 

  .btnRow{display:none;}  
  .btn{appearance:none;border:none;background:var(--btn-bg);color:#aaa;width:clamp(48px,12vw,120px);height:clamp(48px,12vw,120px);border-radius:12px;font-size:clamp(20px,6vw,56px);font-weight:900;cursor:pointer;touch-action:manipulation;} 
  .btn:active{transform:translateY(1px);} 
  .btn:focus-visible{outline:3px solid var(--focus-ring);outline-offset:2px;}

  /* Scroll nudge to allow address bar to hide */
  .scrollNudge{height:96px;flex:0 0 auto;} 

  @media (orientation:portrait){
    .meta{flex:0 0 clamp(120px,20vh,220px);grid-template-columns:1fr;} /* 한 열로 */
    .grid{grid-template-columns:1fr;} /* 한 열로 */
  }
</style>
</head>
<body>
  <div class="wrap">
    <section class="slate" aria-label="영화 촬영 슬레이트">
      <div class="top">
        <a class="brandToggle" href="https://smartstore.naver.com/dekoboko" target="_blank" rel="noopener">DEKOBOKO</a>
        <div class="midHint" aria-hidden="true">⬆ 주소창을 없애려면 위로 살짝 스와이프 하세요</div>
        <div class="controls">
          <button class="smallBtn" id="resetCounts">↺ 리셋</button>
          <button class="themeBtn" id="themeToggle" aria-pressed="false">◐ 색상반전</button>
        </div>
      </div>

      <div class="meta">
        <div class="row">
          <label for="director">DIRECTOR</label>
          <input id="director" placeholder="감독 이름" />
        </div>
        <div class="row">
          <label for="prod">PRODUCTION / NOTE</label>
          <input id="prod" placeholder="작품명 또는 메모" />
        </div>
        <div class="row">
          <label for="date">DATE</label>
          <input id="date" type="date" />
        </div>
      </div>

      <div class="grid">
        <div class="cell">
          <div class="label">SCENE</div>
          <div class="valueBox">
            <button class="btn" data-target="take" data-step="-1">−</button>
            <div class="value" id="take" tabindex="0" role="spinbutton" aria-label="Take number" aria-valuemin="0" aria-valuemax="999" aria-valuenow="0">0</div>
            <button class="btn" data-target="take" data-step="1">+</button>
          </div>
          </div>
        </div>
      </div>
    </section>
    <div class="scrollNudge" aria-hidden="true"></div>
  </div>

<script>
(function(){
  const MIN=0, MAX=999;
  const $=(s,r=document)=>r.querySelector(s);
  const els={scene:$('#scene'),cut:$('#cut'),take:$('#take'),director:$('#director'),prod:$('#prod'),date:$('#date'),themeBtn:$('#themeToggle'),resetBtn:$('#resetCounts')};
  const clampWrap=n=>n>MAX?MAX:n<MIN?MIN:n;
  const getVal=el=>Number(el.textContent)||MIN;
  const setVal=(el,n)=>{const v=clampWrap(parseInt(n,10)||MIN);el.textContent=String(v);el.setAttribute('aria-valuenow',String(v));save();};
  const step=(el,d)=>setVal(el,getVal(el)+d);

  const KEY='slate-state-adaptive-stretch-v3';
  function save(){
    const data={scene:getVal(els.scene),cut:getVal(els.cut),take:getVal(els.take),director:els.director.value||'',prod:els.prod.value||'',date:els.date.value||'',theme:document.body.classList.contains('theme-invert')?'invert':'default'};
    try{localStorage.setItem(KEY,JSON.stringify(data));}catch(e){}
  }
  function load(){
    const raw=localStorage.getItem(KEY);
    if(raw){try{const d=JSON.parse(raw);['scene','cut','take'].forEach(k=>setVal(els[k],d[k]||MIN));els.director.value=d.director||'';els.prod.value=d.prod||'';els.date.value=d.date||'';if(d.theme==='invert'){document.body.classList.add('theme-invert');els.themeBtn.setAttribute('aria-pressed','true');}}catch(e){}}
    if(!els.date.value){const t=new Date();const m=String(t.getMonth()+1).padStart(2,'0');const da=String(t.getDate()).padStart(2,'0');els.date.value=`${t.getFullYear()}-${m}-${da}`;}
  }

  [els.director,els.prod,els.date].forEach(inp=>{inp.addEventListener('input',save);inp.addEventListener('change',save);});

  document.querySelectorAll('.btn').forEach(btn=>{
    const targetId=btn.dataset.target;const delta=Number(btn.dataset.step);const targetEl=els[targetId];
    btn.addEventListener('click',()=>step(targetEl,delta));
  });

  ;[els.scene,els.cut,els.take].forEach(el=>{
    let lastTap=0; el.addEventListener('click',()=>{const now=Date.now(); if(now-lastTap<300){ startInlineInput(el); } lastTap=now;});
    el.addEventListener('dblclick',()=> startInlineInput(el));
  });
  function startInlineInput(el){
    const cur=getVal(el); const input=document.createElement('input');
    input.type='number'; input.className='inlineInput'; input.min=String(MIN); input.max=String(MAX); input.value=String(cur);
    el.replaceWith(input); input.focus({preventScroll:true}); input.select();
    const commit=()=>{ const v=clampWrap(parseInt(input.value,10)||cur); const restored=document.createElement('div'); restored.className='value'; restored.id=el.id; restored.tabIndex=0; restored.role='spinbutton'; restored.setAttribute('aria-label',el.getAttribute('aria-label')||'number'); restored.setAttribute('aria-valuemin',String(MIN)); restored.setAttribute('aria-valuemax',String(MAX)); restored.textContent=String(v); input.parentElement.replaceChild(restored,input); attachInline(restored); setVal(restored,v); };
    const cancel=()=>{ input.value=String(cur); commit(); };
    input.addEventListener('keydown',e=>{ if(e.key==='Enter'){e.preventDefault();commit();} if(e.key==='Escape'){e.preventDefault();cancel();} });
    input.addEventListener('blur',commit);
  }
  function attachInline(el){ let lastTap=0; el.addEventListener('click',()=>{const now=Date.now(); if(now-lastTap<300){ startInlineInput(el); } lastTap=now;}); el.addEventListener('dblclick',()=> startInlineInput(el)); }

  els.themeBtn.addEventListener('click',()=>{const inverted=document.body.classList.toggle('theme-invert');els.themeBtn.setAttribute('aria-pressed',inverted?'true':'false');save();});

  els.resetBtn.addEventListener('click',()=>{['scene','cut','take'].forEach(k=>setVal(els[k],MIN));});

  load();
})();
</script>
</body>
</html>
