<!doctype html>

<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1, viewport-fit=cover" />
<title>웹 슬레이트 (Scene / Cut / Take) – Adaptive Fullscreen Stretch</title>
<style>
  :root{
    --line:#fff; --board:#000; --label:#fff; --value:#fff;
    --btn-bg:transparent; --btn-border:var(--line); --btn-text:var(--label);
    --btn-weak:#9ca3af; /* 옅은 회색 버튼 텍스트 */
    --focus-ring:rgba(127,127,127,.45);
    --scroll-nudge:0px; /* 기본: 데스크탑 0, 모바일에서 아래 미디어쿼리로 증가 */
  }
  .theme-invert{
    --line:#000; --board:#fff; --label:#000; --value:#000;
    --btn-bg:transparent; --btn-border:var(--line); --btn-text:var(--label);
    --btn-weak:#9ca3af;
    --focus-ring:rgba(0,0,0,.35);
  }/* 모바일(터치)에서는 주소창 숨김 유도를 위해 약간의 스크롤 여유 제공 */ @media (pointer: coarse){ :root{ --scroll-nudge: 96px; } }

{box-sizing:border-box;margin:0;padding:0} html,body{ width:100%; background:var(--board);color:var(--label); font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Apple SD Gothic Neo,Noto Sans KR,Helvetica,Arial,sans-serif; / 스크롤 허용: 주소창 숨김 유도 / overflow-y:auto; -webkit-overflow-scrolling:touch; overscroll-behavior-y:contain; min-height:100dvh; / 페이지 자체가 뷰포트보다 작지 않게 */ }

.wrap{ width:100%; min-height:100dvh; /* 동적 뷰포트 기준 전체 높이 */ display:flex;align-items:center;justify-content:center; padding:env(safe-area-inset-top,0) env(safe-area-inset-right,0) env(safe-area-inset-bottom,0) env(safe-area-inset-left,0) } .slate{background:var(--board);width:100%;height:100%;border-radius:0;box-shadow:none;border:none;display:flex;flex-direction:column;}

.top{flex:0 0 auto;display:flex;align-items:center;justify-content:space-between;gap:clamp(8px,1.2vw,18px);padding:clamp(8px,2vh,22px) clamp(10px,3vw,28px) clamp(6px,1.5vh,16px);border-bottom:3px solid var(--line);font-weight:800;color:var(--label);letter-spacing:.02em;} .brandToggle{text-decoration:none;color:var(--btn-text);padding:clamp(4px,0.8vh,8px) clamp(8px,1.2vw,12px);border:2px solid var(--btn-border);border-radius:10px;} .controls{display:flex;gap:clamp(6px,1vw,12px);align-items:center;} .themeBtn,.smallBtn{appearance:none;border:2px solid var(--btn-border);background:var(--btn-bg);color:var(--btn-text);padding:clamp(4px,0.8vh,8px) clamp(8px,1.2vw,12px);border-radius:10px;font-weight:800;cursor:pointer;line-height:1;white-space:nowrap;font-size:clamp(12px,1.4vw,16px);} .themeBtn:focus-visible,.smallBtn:focus-visible{outline:3px solid var(--focus-ring);outline-offset:2px;}

.meta{flex:0 0 clamp(90px,15vh,160px);display:grid;grid-template-columns:1fr 1fr 1fr;border-bottom:3px solid var(--line);} .meta .row{display:flex;flex-direction:column;justify-content:center;padding:clamp(8px,1vh,12px) clamp(10px,2vw,16px);} .meta label{font:800 clamp(10px,1.2vw,14px)/1 var(--label);letter-spacing:.08em;margin-bottom:4px} .meta input{flex:1;background:transparent;color:var(--label);border:none;font-size:clamp(14px,2vw,24px);font-weight:800;padding:0;min-width:0;} .meta input::placeholder{color:#9ca3af;opacity:.9;font-weight:800} input[type="date"]{-webkit-appearance:none;appearance:none;}

.grid{flex:1;display:grid;grid-template-columns:repeat(3,minmax(0,1fr));} .cell{padding:clamp(10px,2.2vh,24px);border-right:3px solid var(--line);border-bottom:3px solid var(--line);display:flex;flex-direction:column;align-items:center;justify-content:center;gap:clamp(8px,1.4vh,16px);} .cell:last-child{border-right:none;}

.label{font-size:clamp(18px,3vw,32px);font-weight:900;color:var(--label);letter-spacing:.12em;}

.valueBox{display:flex;flex-direction:row;align-items:center;justify-content:center;gap:clamp(8px,2vw,16px);}
.value{border:none;padding:clamp(6px,1.6vh,24px);width:auto;min-width:clamp(64px,10vw,160px);text-align:center;font-weight:900;font-size:clamp(50px,10vw,120px);line-height:1;color:var(--value);user-select:none;cursor:pointer;outline:none;}

.inlineInput{width:60%;text-align:center;font-weight:900;font-size:clamp(40px,10vw,120px);padding:clamp(6px,1.8vh,18px);background:transparent;color:var(--value);border:2px solid var(--line);}

.btn{appearance:none;border:2px solid transparent;background:var(--btn-bg);color:var(--btn-weak);width:clamp(40px,8vw,80px);height:clamp(40px,8vw,80px);border-radius:12px;font-size:clamp(22px,5vw,44px);font-weight:900;cursor:pointer;touch-action:manipulation;} .btn:active{transform:translateY(1px);} .btn:focus-visible{outline:3px solid var(--focus-ring);outline-offset:2px;}

@media (orientation:portrait){ .meta{flex:0 0 clamp(120px,20vh,220px);grid-template-columns:1fr;} .grid{grid-template-columns:1fr;} } @media (max-width: 820px) and (orientation: landscape){ .cell{padding:clamp(6px,1.2vh,14px);}
.label{font-size:clamp(14px,2vw,20px);}
.value{font-size:clamp(42px,8vw,96px); min-width:clamp(56px,8vw,120px); padding:clamp(4px,1vh,14px);} .valueBox{gap:clamp(6px,1.2vw,12px);} .btn{width:clamp(34px,7vw,64px); height:clamp(34px,7vw,64px); font-size:clamp(18px,4.5vw,36px);} }

/* 스크롤 유도를 위한 보이지 않는 바닥 여유 영역 / .scrollNudge{height:var(--scroll-nudge);} / ===== 표시 모드 토글: 화면고정(무스크롤) / 전체화면(스크롤) ===== */ .mode-fixed, .mode-fixed body{ overflow:hidden; } .mode-fixed .wrap{ min-height:100svh; height:100svh; } .mode-fixed .scrollNudge{ height:0 !important; } </style>

</head>
<body>
  <div class="wrap">
    <section class="slate" aria-label="영화 촬영 슬레이트">
      <div class="top">
        <a class="brandToggle" href="https://smartstore.naver.com/dekoboko" target="_blank" rel="noopener">DEKOBOKO</a>
        <div class="controls">
          <button class="smallBtn" id="resetCounts" aria-label="Scene/Cut/Take 값 초기화">↺ 리셋</button>
          <button class="smallBtn" id="modeToggle" aria-pressed="true" aria-label="표시 모드 토글">화면고정</button>
          <button class="themeBtn" id="themeToggle" aria-pressed="false" aria-label="흑백 반전 테마 토글">◐ 색상반전</button>
        </div>
      </div><!-- 스크롤 유도를 위한 숨김 여유 영역 -->

  <div class="scrollNudge" aria-hidden="true"></div><script>
(function(){
  const MIN=1, MAX=100;
  const $=(s, r=document)=>r.querySelector(s);
  const els={scene:$('#scene'),cut:$('#cut'),take:$('#take'),director:$('#director'),prod:$('#prod'),date:$('#date'),themeBtn:$('#themeToggle'),resetBtn:$('#resetCounts')};
  const clampWrap=n=>n>MAX?MIN:n<MIN?MAX:n;
  const getVal=el=>Number(el.textContent)||MIN;
  const setVal=(el,n)=>{const v=clampWrap(parseInt(n,10)||MIN);el.textContent=String(v);el.setAttribute('aria-valuenow',String(v));save();};
  const step=(el,d)=>setVal(el,getVal(el)+d);

  const KEY='slate-state-adaptive-stretch-v7';
  function save(){
    const data={
      scene:getVal(els.scene),
      cut:getVal(els.cut),
      take:getVal(els.take),
      director:els.director.value||'',
      prod:els.prod.value||'',
      date:els.date.value||'',
      theme:document.body.classList.contains('theme-invert')?'invert':'default',
      mode:document.documentElement.classList.contains('mode-fixed')?'fixed':'scroll'
    };
    try{localStorage.setItem(KEY,JSON.stringify(data));}catch(e){}
  };
    try{localStorage.setItem(KEY,JSON.stringify(data));}catch(e){}
  }
  function load(){
    const raw=localStorage.getItem(KEY);
    let modeFromState = null;
    if(raw){
      try{
        const d=JSON.parse(raw);
        ['scene','cut','take'].forEach(k=> setVal(els[k], d[k]??MIN));
        els.director.value=d.director||'';
        els.prod.value=d.prod||'';
        els.date.value=d.date||'';
        if(d.theme==='invert'){
          document.body.classList.add('theme-invert');
          els.themeBtn.setAttribute('aria-pressed','true');
        }
        modeFromState = d.mode || null;
      }catch(e){}
    }
    // 초기 모드: 저장값이 없으면 기본은 "화면고정"
    if(modeFromState === 'scroll'){
      document.documentElement.classList.remove('mode-fixed');
    }else{
      document.documentElement.classList.add('mode-fixed');
    }
    const fixed = document.documentElement.classList.contains('mode-fixed');
    const modeBtn = document.getElementById('modeToggle');
    modeBtn.textContent = fixed ? '화면고정' : '전체화면';
    modeBtn.setAttribute('aria-pressed', fixed ? 'true' : 'false');

    if(!els.date.value){
      const t=new Date(); const m=String(t.getMonth()+1).padStart(2,'0'); const da=String(t.getDate()).padStart(2,'0');
      els.date.value = `${t.getFullYear()}-${m}-${da}`;
    }
  }
        if(d.mode==='fixed'){
          document.documentElement.classList.add('mode-fixed');
        }
      }catch(e){}
    }
    // 초기 모드 버튼 텍스트 반영
    const fixed = document.documentElement.classList.contains('mode-fixed');
    document.getElementById('modeToggle').textContent = fixed ? '화면고정' : '전체화면';

    if(!els.date.value){
      const t=new Date(); const m=String(t.getMonth()+1).padStart(2,'0'); const da=String(t.getDate()).padStart(2,'0');
      els.date.value = `${t.getFullYear()}-${m}-${da}`;
    }
  }}catch(e){}}
    if(!els.date.value){const t=new Date();const m=String(t.getMonth()+1).padStart(2,'0');const da=String(t.getDate()).padStart(2,'0');els.date.value=`${t.getFullYear()}-${m}-${da}`;}
  }

  [els.director,els.prod,els.date].forEach(inp=>{inp.addEventListener('input',save);inp.addEventListener('change',save);});

  // 증감 버튼: 클릭 이중입력 방지(only pointer), 느린 반복
  document.querySelectorAll('.btn').forEach(btn=>{
    const targetId=btn.dataset.target;const delta=Number(btn.dataset.step);const targetEl=els[targetId];

    let pressTimer=null, repeatTimer=null;
    const REPEAT_DELAY=600;   // 반복 시작 지연(느리게)
    const REPEAT_RATE =260;   // 반복 속도(느리게)

    const clearTimers=()=>{
      if(pressTimer){clearTimeout(pressTimer);pressTimer=null;}
      if(repeatTimer){clearInterval(repeatTimer);repeatTimer=null;}
    };

    const onDown=(e)=>{
      e.preventDefault();                 // click 생성 방지로 중복 클릭 제거
      step(targetEl, delta);              // 1회만 즉시 증감
      pressTimer=setTimeout(()=>{
        repeatTimer=setInterval(()=> step(targetEl, delta), REPEAT_RATE);
      }, REPEAT_DELAY);
    };

    const onUp=()=> clearTimers();

    btn.addEventListener('pointerdown', onDown);
    btn.addEventListener('pointerup', onUp);
    btn.addEventListener('pointerleave', onUp);
    btn.addEventListener('pointercancel', onUp);
  });

  // 숫자 직접 입력: 더블탭
  ;[els.scene,els.cut,els.take].forEach(el=>{
    let lastTap=0; el.addEventListener('click',()=>{const now=Date.now(); if(now-lastTap<300){ startInlineInput(el); } lastTap=now;});
    el.addEventListener('dblclick',()=> startInlineInput(el));
  });
  function startInlineInput(el){
    const cur=getVal(el); const input=document.createElement('input');
    input.type='number'; input.className='inlineInput'; input.min=String(MIN); input.max=String(MAX); input.value=String(cur);
    el.replaceWith(input); input.focus({preventScroll:true}); input.select();
    const commit=()=>{ const v=clampWrap(parseInt(input.value,10)||cur); const restored=document.createElement('div'); restored.className='value'; restored.id=el.id; restored.tabIndex=0; restored.role='spinbutton'; restored.setAttribute('aria-label',el.getAttribute('aria-label')||'number'); restored.setAttribute('aria-valuemin',String(MIN)); restored.setAttribute('aria-valuemax',String(MAX)); restored.textContent=String(v); input.parentElement.replaceChild(restored,input); attachInline(restored); setVal(restored,v); };
    const cancel=()=>{ input.value=String(cur); commit(); };
    input.addEventListener('keydown',e=>{ if(e.key==='Enter'){e.preventDefault();commit();} if(e.key==='Escape'){e.preventDefault();cancel();} });
    input.addEventListener('blur',commit);
  }
  function attachInline(el){ let lastTap=0; el.addEventListener('click',()=>{const now=Date.now(); if(now-lastTap<300){ startInlineInput(el); } lastTap=now;}); el.addEventListener('dblclick',()=> startInlineInput(el)); }

  // 테마 토글 & 리셋
  els.themeBtn.addEventListener('click',()=>{const inverted=document.body.classList.toggle('theme-invert');els.themeBtn.setAttribute('aria-pressed',inverted?'true':'false');save();});
  els.resetBtn.addEventListener('click',()=>{['scene','cut','take'].forEach(k=>setVal(els[k],MIN));});

  // ===== 표시 모드 토글(스크롤 가능=전체화면 / 스크롤 불가=화면고정) =====
  const modeBtn = document.getElementById('modeToggle');
  function applyMode(mode){
    const fixed = (mode === 'fixed');
    document.documentElement.classList.toggle('mode-fixed', fixed);
    modeBtn.textContent = fixed ? '화면고정' : '전체화면';
    modeBtn.setAttribute('aria-pressed', fixed ? 'true' : 'false');
    save();
  }
  modeBtn.addEventListener('click',()=>{
    const nowFixed = !document.documentElement.classList.contains('mode-fixed');
    applyMode(nowFixed ? 'fixed' : 'scroll');
  });});

  load();
})();
</script></body>
</html>