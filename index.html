<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>웹 슬레이트 (Scene / Cut / Take) – Invert Theme</title>
<style>
  :root{
    --line:#fff;
    --board:#000;
    --label:#fff;
    --value:#fff;
    --btn-bg:transparent;
    --btn-border:var(--line);
    --btn-text:var(--label);
    --focus-ring:rgba(127,127,127,.45);
  }
  .theme-invert{
    --line:#000;
    --board:#fff;
    --label:#000;
    --value:#000;
    --btn-bg:transparent;
    --btn-border:var(--line);
    --btn-text:var(--label);
    --focus-ring:rgba(0,0,0,.35);
  }

  body{margin:0; background:var(--board); color:var(--label);
    font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Apple SD Gothic Neo,Noto Sans KR,Helvetica,Arial,sans-serif}
  .wrap{min-height:100svh; display:grid; place-items:center; padding:24px}
  .slate{ background:var(--board); width:min(920px, 94vw); border-radius:12px; box-shadow:0 12px 40px rgba(0,0,0,.25); border:1px solid rgba(127,127,127,.35); overflow:hidden; }

  .top{display:flex; align-items:center; justify-content:space-between; gap:12px; padding:18px 22px 12px; border-bottom:3px solid var(--line); font-weight:800; color:var(--label); letter-spacing:.02em;}
  .brandToggle{ text-decoration:none; color:var(--btn-text); display:inline-block; padding:6px 10px; border:2px solid var(--btn-border); border-radius:10px; }
  .brandToggle:focus-visible{ outline:3px solid var(--focus-ring); outline-offset:2px; }
  .controls{ display:flex; gap:8px; align-items:center; }
  .themeBtn{appearance:none; border:2px solid var(--btn-border); background:var(--btn-bg); color:var(--btn-text); padding:6px 10px; border-radius:10px; font-weight:800; cursor:pointer; line-height:1; white-space:nowrap;}
  .themeBtn:focus-visible{ outline:3px solid var(--focus-ring); outline-offset:2px; }

  .meta{ display:grid; grid-template-columns: 1fr 1fr 1fr; gap:0; border-bottom:3px solid var(--line); }
  .meta .row{ display:flex; flex-direction:column; justify-content:stretch; padding:10px 12px; border-right:3px solid var(--line); box-sizing:border-box; }
  .meta .row:last-child{border-right:none;}
  .meta label{ font:800 9px/1 var(--label); letter-spacing:.08em; margin-bottom:6px }
  .meta input{ flex:1; min-width:0; background:transparent; color:var(--label); border:none; border-radius:0; font-size:20px; font-weight:800; padding:20px 14px; box-sizing:border-box; height:96px; }
  .meta input::placeholder{color:#9ca3af; opacity:.9; font-weight:800}

  .grid{ display:grid; grid-template-columns: repeat(3, 1fr); gap:0; }
  .cell{ padding:18px 18px 22px; border-right:3px solid var(--line); border-bottom:3px solid var(--line); min-height:148px; display:flex; flex-direction:column; gap:12px; align-items:center; }
  .cell:last-child{border-right:none;}

  .label{ font-size:28px; font-weight:900; color:var(--label); letter-spacing:.12em; }

  .valueBox{ display:flex; flex-direction:column; align-items:center; gap:10px; }
  .value{ border:none; border-radius:0; padding:20px 14px; min-width:140px; text-align:center; font-weight:900; font-size:96px; line-height:1; color:var(--value); user-select:none; cursor:pointer; outline:none; }
  .value:focus{ box-shadow:none; }

  .inlineInput{ width:160px; text-align:center; font-weight:900; font-size:72px; padding:10px 8px; background:transparent; color:var(--value); border:2px solid var(--line); }

  .btnRow{ display:flex; align-items:center; justify-content:center; gap:12px; }
  .btn{ appearance:none; border:none; background:var(--btn-bg); color:var(--btn-text); width:52px; height:52px; border-radius:12px; font-size:28px; font-weight:900; line-height:1; cursor:pointer; }
  .btn:active{ transform:translateY(1px); }
  .btn:focus-visible{ outline:3px solid var(--focus-ring); outline-offset:2px; }

  @media (max-width:700px){
    .grid{ grid-template-columns: 1fr; }
    .cell{ border-right:none; }
    .label{ font-size:22px; }
    .value{ font-size:72px; }
    .meta{ grid-template-columns:1fr; }
    .meta .row{ border-right:none; border-bottom:3px solid var(--line); }
    .meta .row:last-child{ border-bottom:none; }
  }
</style>
</head>
<body>
  <div class="wrap">
    <section class="slate" aria-label="영화 촬영 슬레이트">
      <div class="top">
        <a class="brandToggle" href="https://smartstore.naver.com/dekoboko" target="_blank" rel="noopener">DEKOBOKO</a>
        <div class="controls">
          <button class="themeBtn" id="themeToggle" aria-pressed="false" aria-label="흑백 반전 테마 토글">◐ 색상반전</button>
        </div>
      </div>

      <div class="meta">
        <div class="row">
          <label for="director">DIRECTOR</label>
          <input id="director" placeholder="감독 이름" />
        </div>
        <div class="row">
          <label for="prod">PRODUCTION / NOTE</label>
          <input id="prod" placeholder="작품명 또는 메모" />
        </div>
        <div class="row">
          <label for="date">DATE</label>
          <input id="date" type="date" />
        </div>
      </div>

      <div class="grid">
        <div class="cell">
          <div class="label">SCENE</div>
          <div class="valueBox">
            <div class="value" id="scene" tabindex="0" role="spinbutton" aria-label="Scene number" aria-valuemin="1" aria-valuemax="100" aria-valuenow="1">1</div>
            <div class="btnRow">
              <button class="btn" data-target="scene" data-step="-1" aria-label="Scene 감소">−</button>
              <button class="btn" data-target="scene" data-step="1" aria-label="Scene 증가">+</button>
            </div>
          </div>
        </div>
        <div class="cell">
          <div class="label">CUT</div>
          <div class="valueBox">
            <div class="value" id="cut" tabindex="0" role="spinbutton" aria-label="Cut number" aria-valuemin="1" aria-valuemax="100" aria-valuenow="1">1</div>
            <div class="btnRow">
              <button class="btn" data-target="cut" data-step="-1" aria-label="Cut 감소">−</button>
              <button class="btn" data-target="cut" data-step="1" aria-label="Cut 증가">+</button>
            </div>
          </div>
        </div>
        <div class="cell">
          <div class="label">TAKE</div>
          <div class="valueBox">
            <div class="value" id="take" tabindex="0" role="spinbutton" aria-label="Take number" aria-valuemin="1" aria-valuemax="100" aria-valuenow="1">1</div>
            <div class="btnRow">
              <button class="btn" data-target="take" data-step="-1" aria-label="Take 감소">−</button>
              <button class="btn" data-target="take" data-step="1" aria-label="Take 증가">+</button>
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>

<script>
(function(){
  const MIN=1, MAX=100;
  const $ = (s, r=document)=>r.querySelector(s);
  const els={ scene:$('#scene'), cut:$('#cut'), take:$('#take'), director:$('#director'), prod:$('#prod'), date:$('#date'), themeBtn:$('#themeToggle') };

  const clampWrap=n=>n>MAX?MIN:n<MIN?MAX:n;
  const getVal=el=>Number(el.textContent)||MIN;
  const setVal=(el,n)=>{ const v=clampWrap(parseInt(n,10)||MIN); el.textContent=String(v); el.setAttribute('aria-valuenow',String(v)); save(); };
  const step=(el,d)=>setVal(el, getVal(el)+d);

  const KEY='slate-state-v5';
  function save(){
    const data={ scene:getVal(els.scene), cut:getVal(els.cut), take:getVal(els.take), director:els.director.value||'', prod:els.prod.value||'', date:els.date.value||'', theme:document.body.classList.contains('theme-invert') ? 'invert' : 'default' };
    localStorage.setItem(KEY, JSON.stringify(data));
  }
  function load(){
    const raw=localStorage.getItem(KEY);
    if(raw){
      try{ const d=JSON.parse(raw); ['scene','cut','take'].forEach(k=> setVal(els[k], d[k]??MIN)); els.director.value=d.director||''; els.prod.value=d.prod||''; els.date.value=d.date||''; if(d.theme==='invert'){ document.body.classList.add('theme-invert'); els.themeBtn.setAttribute('aria-pressed','true'); } }catch(e){}
    }
    if(!els.date.value){ const t=new Date(); const m=String(t.getMonth()+1).padStart(2,'0'); const da=String(t.getDate()).padStart(2,'0'); els.date.value = `${t.getFullYear()}-${m}-${da}`; }
  }

  [els.director, els.prod, els.date].forEach(inp=>{ inp.addEventListener('input', save); inp.addEventListener('change', save); });

  [els.scene, els.cut, els.take].forEach(el=>{
    el.addEventListener('keydown', e=>{
      switch(e.key){
        case 'ArrowUp': e.preventDefault(); step(el,+1); break;
        case 'ArrowDown': e.preventDefault(); step(el,-1); break;
        case 'PageUp': e.preventDefault(); step(el,+10); break;
        case 'PageDown': e.preventDefault(); step(el,-10); break;
        case 'Home': e.preventDefault(); setVal(el,MIN); break;
        case 'End': e.preventDefault(); setVal(el,MAX); break;
      }
    });
    addDirectInput(el);
  });

  document.querySelectorAll('.btn').forEach(btn=>{ const targetId = btn.dataset.target; const delta = Number(btn.dataset.step); const targetEl = els[targetId]; btn.addEventListener('click', ()=> step(targetEl, delta)); });

  function addDirectInput(el){ let lastTap=0; el.addEventListener('click', ()=>{ const now=Date.now(); if(now-lastTap<300){ startInlineInput(el); } lastTap=now; }); el.addEventListener('dblclick', ()=> startInlineInput(el)); }

  function startInlineInput(el){ const cur=getVal(el); const input=document.createElement('input'); input.type='number'; input.className='inlineInput'; input.min=String(MIN); input.max=String(MAX); input.value=String(cur); el.replaceWith(input); input.focus(); input.select();
    const commit=()=>{ const v = clampWrap(parseInt(input.value,10)||cur); const restored = document.createElement('div'); restored.className='value'; restored.id = el.id; restored.tabIndex=0; restored.role='spinbutton'; restored.setAttribute('aria-label', el.getAttribute('aria-label')||'number'); restored.setAttribute('aria-valuemin', String(MIN)); restored.setAttribute('aria-valuemax', String(MAX)); restored.textContent=String(v); input.parentElement.replaceChild(restored, input); addDirectInput(restored); restored.addEventListener('keydown', e=>{ switch(e.key){ case 'ArrowUp': e.preventDefault(); setVal(restored, getVal(restored)+1); break; case 'ArrowDown': e.preventDefault(); setVal(restored, getVal(restored)-1); break; case 'PageUp': e.preventDefault(); setVal(restored, getVal(restored)+10); break; case 'PageDown': e.preventDefault(); setVal(restored, getVal(restored)-10); break; case 'Home': e.preventDefault(); setVal(restored,MIN); break; case 'End': e.preventDefault(); setVal(restored,MAX); break; } }); save(); };
    const cancel=()=>{ input.value=String(cur); commit(); };
    input.addEventListener('keydown', e=>{ if(e.key==='Enter'){ e.preventDefault(); commit(); } if(e.key==='Escape'){ e.preventDefault(); cancel(); } }); input.addEventListener('blur', commit); }

  function applyThemeToggle(){ const inverted = document.body.classList.toggle('theme-invert'); els.themeBtn.setAttribute('aria-pressed', inverted ? 'true' : 'false'); save(); }
  els.themeBtn.addEventListener('click', applyThemeToggle);

  load();
})();
</script>
</body>
</html>
