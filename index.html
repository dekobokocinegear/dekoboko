<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1, viewport-fit=cover" />
<title>웹 슬레이트 (Scene / Cut / Take) – Adaptive Responsive (0–999)</title>
<style>
  :root{
    --line:#fff; --board:#000; --label:#fff; --value:#fff;
    --btn-bg:rgba(255,255,255,.08); --btn-border:var(--line); --btn-text:var(--label);
    --focus-ring:rgba(127,127,127,.45);
    --scroll-nudge:0px;

    /* 반응형 스케일 기준치: 화면 너비와 높이 모두 고려해 유연조절 */
    --u: max(1.8vmin, 8px);           /* 기본 단위(폰에서 너무 작지 않게) */
    --num-max: 240px;                 /* 숫자 폰트 상한치(데스크탑에서 너무 과도하지 않게) */
    --btn-max: 96px;                  /* 버튼 상한치 */
    --pad-max: 28px;                  /* 패딩 상한치 */
  }
  @media (pointer:coarse){ :root{ --scroll-nudge:96px; } }

  .theme-invert{
    --line:#000; --board:#fff; --label:#000; --value:#000;
    --btn-bg:rgba(0,0,0,.08); --btn-border:var(--line); --btn-text:var(--label);
  }

  *{box-sizing:border-box;margin:0;padding:0}
  html,body{
    width:100%; min-height:100dvh;
    background:var(--board); color:var(--label);
    font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Apple SD Gothic Neo,Noto Sans KR,Helvetica,Arial,sans-serif;
    overflow-y:auto;
  }

  .wrap{min-height:100dvh;display:flex;flex-direction:column;align-items:stretch;justify-content:flex-start;}
  .slate{background:var(--board);width:100vw;min-height:100dvh;display:flex;flex-direction:column;}

  /* 헤더 */
  .top{
    display:flex;align-items:center;justify-content:space-between;gap:clamp(8px, 1.2vw, 24px);
    padding:clamp(10px, 1.5vh, var(--pad-max)) clamp(12px, 2vw, var(--pad-max));
    border-bottom:3px solid var(--line);font-weight:800;
  }
  .brandToggle{
    color:var(--btn-text);text-decoration:none;
    padding:clamp(4px, 0.8vh, 10px) clamp(8px, 1.2vw, 14px);
    border:2px solid var(--btn-border);border-radius:10px;background:var(--btn-bg);
    transition:background .15s ease,border-color .15s ease;
  }
  .brandToggle:hover{background:color-mix(in srgb, var(--btn-bg) 60%, transparent);}
  .midHint{
    flex:1;text-align:center;font-weight:300;
    font-size:clamp(10px, 1.4vmin, 12px);
    opacity:.7;letter-spacing:.02em;white-space:nowrap;
  }
  .controls{display:flex;gap:clamp(6px, 1vw, 14px);}
  .themeBtn,.smallBtn{
    border:2px solid var(--btn-border);background:var(--btn-bg);color:var(--btn-text);
    padding:clamp(4px, 0.8vh, 10px) clamp(8px, 1.2vw, 14px);
    border-radius:10px;font-weight:800;cursor:pointer;
    transition:background .15s ease,border-color .15s ease;
  }
  .themeBtn:hover,.smallBtn:hover{background:color-mix(in srgb, var(--btn-bg) 60%, transparent);}
  .themeBtn:focus-visible,.smallBtn:focus-visible{outline:3px solid var(--focus-ring);outline-offset:2px;}

  /* 메타 */
  .meta{
    display:grid;grid-template-columns:1fr 1fr 1fr;
    border-bottom:3px solid var(--line);
  }
  .meta .row{
    display:flex;flex-direction:column;justify-content:center;
    padding:clamp(8px, 1.2vh, 12px) clamp(10px, 2vw, 16px);
  }
  .meta label{font:800 clamp(9px, 1.6vmin, 14px)/1 var(--label);margin-bottom:4px;}
  .meta input{
    background:transparent;color:var(--label);border:none;
    font-size:clamp(14px, 2.2vmin, 22px);font-weight:800;min-width:0;
  }
  .meta input::placeholder{color:#9ca3af;}

  /* 메인 그리드 */
  .grid{
    flex:1 1 auto;display:grid;grid-template-columns:repeat(3,1fr);
  }
  .cell{
    padding:clamp(10px, 2vh, var(--pad-max));
    border-right:3px solid var(--line);border-bottom:3px solid var(--line);
    display:flex;flex-direction:column;align-items:center;justify-content:center;
    gap:clamp(8px, 1.4vh, 16px);
  }
  .cell:last-child{border-right:none;}

  .label{
    font-size:clamp(18px, 3vmin, 34px);
    font-weight:900;letter-spacing:.12em;
  }
  .valueBox{
    display:flex;align-items:center;justify-content:center;
    gap:clamp(8px, 2vw, 20px);width:100%;
  }
  .value{
    flex:1;text-align:center;font-weight:900;line-height:1;color:var(--value);
    user-select:none;white-space:nowrap;
    /* 핵심: 화면에 맞춰 유연하게 커지고(데스크탑/아이패드) 휴대폰에서는 과하지 않게 */
    font-size:clamp(56px, calc(8vmin + 6vw), var(--num-max));
  }
  .btn{
    border:none;background:transparent;color:#9ca3af;
    width:clamp(44px, calc(4vmin + 2vw), var(--btn-max));
    height:clamp(44px, calc(4vmin + 2vw), var(--btn-max));
    border-radius:12px;font-size:clamp(22px, calc(3.2vmin + 1vw), 42px);
    font-weight:900;cursor:pointer;touch-action:manipulation;
  }
  .btn:active{transform:translateY(1px);}
  .btn:focus-visible{outline:3px solid var(--focus-ring);outline-offset:2px;}

  /* 주소창 숨김 유도용 여유 높이(모바일에서만) */
  .scrollNudge{height:var(--scroll-nudge);flex:0 0 auto;}

  /* 작은 화면/세로: 단일열로 안전하게 */
  @media (orientation:portrait){
    .meta{grid-template-columns:1fr;}
    .grid{grid-template-columns:1fr;}
  }
  /* 매우 작은 폭(아이폰 mini 등) 보정 */
  @media (max-width:430px){
    .value{font-size:clamp(48px, calc(9vmin + 5vw), 112px);}
    .btn{width:clamp(40px, calc(4.8vmin + 2vw), 72px);height:clamp(40px, calc(4.8vmin + 2vw), 72px);}
  }
  /* 넓은 데스크탑에서 더 시원하게 (레이아웃 흔들리지 않는 선) */
  @media (min-width:1200px){
    :root{ --num-max: 300px; --btn-max: 110px; }
  }
  @media (min-width:1600px){
    :root{ --num-max: 360px; --btn-max: 120px; }
  }
</style>
</head>
<body>
  <div class="wrap">
    <section class="slate" aria-label="영화 촬영 슬레이트">
      <div class="top">
        <a class="brandToggle" href="https://smartstore.naver.com/dekoboko" target="_blank" rel="noopener">DEKOBOKO</a>
        <div class="midHint" aria-hidden="true">⬆ 주소창을 없애려면 위로 살짝 스와이프 하세요</div>
        <div class="controls">
          <button class="smallBtn" id="resetCounts">↺ 리셋</button>
          <button class="themeBtn" id="themeToggle" aria-pressed="false">◐ 색상반전</button>
        </div>
      </div>

      <div class="meta">
        <div class="row">
          <label for="director">DIRECTOR</label>
          <input id="director" placeholder="감독 이름" />
        </div>
        <div class="row">
          <label for="prod">PRODUCTION / NOTE</label>
          <input id="prod" placeholder="작품명 또는 메모" />
        </div>
        <div class="row">
          <label for="date">DATE</label>
          <input id="date" type="date" />
        </div>
      </div>

      <div class="grid">
        <div class="cell">
          <div class="label">SCENE</div>
          <div class="valueBox">
            <button class="btn" data-target="scene" data-step="-1">−</button>
            <div class="value" id="scene" tabindex="0" role="spinbutton" aria-label="Scene number" aria-valuemin="0" aria-valuemax="999" aria-valuenow="0">0</div>
            <button class="btn" data-target="scene" data-step="1">+</button>
          </div>
        </div>
        <div class="cell">
          <div class="label">CUT</div>
          <div class="valueBox">
            <button class="btn" data-target="cut" data-step="-1">−</button>
            <div class="value" id="cut" tabindex="0" role="spinbutton" aria-label="Cut number" aria-valuemin="0" aria-valuemax="999" aria-valuenow="0">0</div>
            <button class="btn" data-target="cut" data-step="1">+</button>
          </div>
        </div>
        <div class="cell">
          <div class="label">TAKE</div>
          <div class="valueBox">
            <button class="btn" data-target="take" data-step="-1">−</button>
            <div class="value" id="take" tabindex="0" role="spinbutton" aria-label="Take number" aria-valuemin="0" aria-valuemax="999" aria-valuenow="0">0</div>
            <button class="btn" data-target="take" data-step="1">+</button>
          </div>
        </div>
      </div>
    </section>
    <div class="scrollNudge" aria-hidden="true"></div>
  </div>

<script>
(function(){
  const MIN=0, MAX=999;
  const $=s=>document.querySelector(s);
  const els={
    scene:$('#scene'), cut:$('#cut'), take:$('#take'),
    director:$('#director'), prod:$('#prod'), date:$('#date'),
    themeBtn:$('#themeToggle'), resetBtn:$('#resetCounts')
  };

  const clamp=n=>Math.min(MAX,Math.max(MIN,n));
  const getVal=el=>Number(el.textContent)||MIN;

  function setVal(el,n){
    const v = clamp(parseInt(n,10));
    const safe = Number.isFinite(v) ? v : MIN;
    el.textContent = String(safe);
    el.setAttribute('aria-valuenow', String(safe));
    save();
  }
  const step=(el,d)=>setVal(el, getVal(el)+d);

  const KEY='slate-scroll-inline-0to999-resp-v1';
  function save(){
    const data={
      scene:getVal(els.scene), cut:getVal(els.cut), take:getVal(els.take),
      director:els.director.value||'', prod:els.prod.value||'', date:els.date.value||'',
      theme:document.body.classList.contains('theme-invert')?'invert':'default'
    };
    try{ localStorage.setItem(KEY, JSON.stringify(data)); }catch(e){}
  }
  function load(){
    const raw=localStorage.getItem(KEY);
    if(raw){ try{
      const d=JSON.parse(raw);
      ['scene','cut','take'].forEach(k=> setVal(els[k], d[k]??MIN));
      els.director.value=d.director||''; els.prod.value=d.prod||''; els.date.value=d.date||'';
      if(d.theme==='invert'){
        document.body.classList.add('theme-invert');
        els.themeBtn.setAttribute('aria-pressed','true');
      }
    }catch(e){} }
    if(!els.date.value){
      const t=new Date(), m=String(t.getMonth()+1).padStart(2,'0'), da=String(t.getDate()).padStart(2,'0');
      els.date.value=`${t.getFullYear()}-${m}-${da}`;
    }
  }

  // +/- 버튼 (클릭만)
  document.querySelectorAll('.btn').forEach(btn=>{
    const t=btn.dataset.target, delta=Number(btn.dataset.step), el=els[t];
    btn.addEventListener('click',()=> step(el, delta));
  });

  // 테마 토글
  els.themeBtn.addEventListener('click',()=>{
    const inverted = document.body.classList.toggle('theme-invert');
    els.themeBtn.setAttribute('aria-pressed', inverted?'true':'false');
    save();
  });

  // 리셋
  els.resetBtn.addEventListener('click',()=>{
    ['scene','cut','take'].forEach(k=> setVal(els[k], MIN));
  });

  // 입력 저장
  [els.director, els.prod, els.date].forEach(inp=> inp.addEventListener('input', save));

  // 더블 탭/더블 클릭 → 직접 입력
  ['scene','cut','take'].forEach(id=> attachInlineEdit(els[id]));
  function attachInlineEdit(el){
    let lastTap=0;
    el.addEventListener('click', ()=>{
      const now=Date.now();
      if(now-lastTap<300){ startInlineInput(el); }
      lastTap=now;
    });
    el.addEventListener('dblclick', ()=> startInlineInput(el));
  }

  function startInlineInput(displayEl){
    const cur = getVal(displayEl);
    const input = document.createElement('input');
    input.type='number'; input.min=String(MIN); input.max=String(MAX);
    input.value=String(cur); input.className='inlineInputTemp';
    Object.assign(input.style,{
      width:'60%', textAlign:'center', fontWeight:'900',
      fontSize:'clamp(36px, 6vmin, 64px)',
      padding:'6px 8px', background:'transparent', color:'var(--value)', border:'2px solid var(--line)'
    });

    const parent = displayEl.parentElement;
    parent.replaceChild(input, displayEl);
    input.focus({preventScroll:true}); input.select();

    const commit=()=>{
      const v = clamp(parseInt(input.value,10));
      const restored = document.createElement('div');
      restored.className='value'; restored.id=displayEl.id; restored.tabIndex=0;
      restored.role='spinbutton'; restored.setAttribute('aria-label', displayEl.getAttribute('aria-label')||'number');
      restored.setAttribute('aria-valuemin', String(MIN)); restored.setAttribute('aria-valuemax', String(MAX));
      restored.textContent=String(Number.isFinite(v)?v:cur);
      parent.replaceChild(restored, input);
      attachInlineEdit(restored);
      setVal(restored, restored.textContent);
    };
    const cancel=()=>{ input.value=String(cur); commit(); };

    input.addEventListener('keydown', e=>{
      if(e.key==='Enter'){ e.preventDefault(); commit(); }
      if(e.key==='Escape'){ e.preventDefault(); cancel(); }
    });
    input.addEventListener('blur', commit);
  }

  load();
})();
</script>
</body>
</html>
